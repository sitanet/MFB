{% extends 'base.html' %}

{% load static %}

{% block content %}

      
            {% include 'includes/alerts.html' %}
                                    

       
               <div class="container-fluid">
                     <div class="row column_title">
                         <div class="col-md-12">
                               <div class="page_title d-flex justify-content-between align-items-center">
                                       <h2>User Form</h2>
                                       <a href="javascript:history.back()" class="btn btn-outline-secondary">
                                           <i class="fa fa-arrow-left mr-2"></i> Back
                                       </a>
                               </div>
                         </div>
                     </div>
           
             

                            <p style="color: red;">{{ form.errors }}</p> 
                            
                            
                   
                     <form method="post" action="{% url 'registeruser'%}" class="bg-white p-5 rounded rounded-5 shadow">
                        {% csrf_token %}
                        <!-- <h4>User Form</h4> -->
                        <div class="form-row">
                         
                           <!-- <div class="form-group col-md-6">
                              <label for="fName">Branch</label>
                              <input type="text" name="branch" class="form-control bg-light" value="{{form.branch.value}}">
                              
                           </div> -->
<div class="form-group col-md-6">
    <label for="branch">Branch</label>
    <select class="form-control bg-light" name="branch" id="branch" required>
        <option value="">Select Branch</option>
        {% for branch in branches %}
            <option value="{{ branch.id }}" 
                {% if form.branch.value|stringformat:"s" == branch.id|stringformat:"s" %}selected{% endif %}
                {% if branches|length == 1 %}selected{% endif %}>
                {{ branch.branch_name }}
            </option>
        {% endfor %}
    </select>
</div>




                          
                           <div class="form-group col-md-6">
                              <label for="fName">First Name</label>
                              <input type="text" name="first_name" class="form-control bg-light" placeholder="First Name">
                              
                           </div>
                           <div class="form-group col-md-6">
                            <label for="fName">Last Name</label>
                            <input type="text" name="last_name" class="form-control bg-light" placeholder="Last Name">
                            
                         </div>
   
                           <div class="form-group col-md-6">
                              <label for="address">Email Address</label>
                              <input type="email" name="email" class="form-control bg-light" placeholder="Email Address">
                           </div>
                           <div class="form-group col-md-6">
                              <label for="Phone">Phone Number</label>
                              <input type="tel" name="phone_number" class="form-control bg-light" placeholder="Phone Number">
                           </div>
   
                           <div class="form-group col-md-6">
                              <label for="marital">Role</label>
                              <select class="form-control bg-light" name="role" id="" required>
                                 <option value="">Select Role</option>
                                 {% for choice in form.role.field.choices %}
                                 <option value="{{ choice.0 }}" {% if choice.0 == form.role.value %}selected{% endif %}>
                                     {{ choice.1 }}
                                 </option>
                             {% endfor %}
   
                              </select>
                           </div>

<div class="form-group col-md-6">
    <label for="customer">Customer (Optional)</label>
    <select name="customer" class="form-control bg-light select2" id="customer">
        <option value="">Select Customer</option>
        {% for cust in form.customer.field.queryset %}
            <option value="{{ cust.id }}" 
                {% if form.customer.value|stringformat:"s" == cust.id|stringformat:"s" %}selected{% endif %}>
                {{ cust.first_name }} {{ cust.last_name }} {% if cust.ac_no %}- {{ cust.ac_no }}{% endif %}
            </option>
        {% endfor %}
    </select>
</div>


                           <div class="form-group col-md-6">
                            <label for="fName">Username</label>
                            <input type="text" name="username" class="form-control bg-light" placeholder="Username">
                            
                         </div>
                         <div class="form-group col-md-6">
                           <label for="fName">Cashier GL?</label>
                           <input type="text" name="cashier_gl" class="form-control bg-light" placeholder="cashier GL">
                           
                        </div>
                        <div class="form-group col-md-6">
                           <label for="fName">Cashier AC?</label>
                           <input type="text" name="cashier_ac" class="form-control bg-light" placeholder="cashier AC">
                           
                        </div>
                        
                           <div class="form-group col-md-6">
                              <label for="occupation">Password </label>
                              <input type="password" name="password" class="form-control bg-light" placeholder="password">
                           </div>
                           <div class="form-group col-md-6">
                              <label for="id">Confirm Password</label>
                              <input type="password" name="confirm_password" class="form-control bg-light" placeholder="Confirm Password">
                           </div>
                           <!-- <div class="form-group col-md-6">
                              <label for="email">Department</label>
                              <input type="email" class="form-control bg-light" placeholder="Email Address">
                           </div> -->
                        </div>
                        <button type="submit" class="btn w-100 btn-danger mt-4 shadow-sm">Submit</button>
                     </form>
                           
                </div>
            
         
    <script>
    $(document).ready(function() {
        $('#customer').select2({
            placeholder: "Select Customer",
            allowClear: true,  // Allows clearing the selection
            width: '100%'      // Make it full width
        });
    });
</script>
        
            
            
                  {% endblock %}